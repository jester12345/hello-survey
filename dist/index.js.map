{"version":3,"sources":["../src/index.js"],"names":["helloSurvey","data","init","console","log","target","document","getElementById","addElementTo","method","eventType","eventAction","submit","children","error","parent","element","params","evt","elem","createElement","key","text","createTextNode","appendChild","hasOwnProperty","setAttribute","addEventListener","event","c","preventDefault"],"mappings":";;;;;;IAAMA,W;AACF;;;;;;AAMA,yBAAYC,IAAZ,EAAkB;AAAA;;AACd,YAAIA,IAAJ,EAAW;AACP;AACA,iBAAKC,IAAL,CAAUD,IAAV;AACH;AACJ;;;;6BAEIA,I,EAAM;AACPE,oBAAQC,GAAR,CAAY,QAAZ,EAAsBH,IAAtB;;AAEA,iBAAKI,MAAL;AACA,gBAAIJ,KAAKI,MAAT,EAAkB;AACd,qBAAKA,MAAL,GAAcC,SAASC,cAAT,CAAwBN,KAAKI,MAA7B,CAAd;AACH;;AAED,gBAAI,KAAKA,MAAT,EAAkB;AACd;AACA,qBAAKG,YAAL,CAAkB,KAAKH,MAAvB,EAA+B,MAA/B,EAAuC;AACnCI,4BAAQ,MAD2B;AAEnC,sCAAkB;AAFiB,iBAAvC,EAGG;AACCC,+BAAgB,QADjB;AAECC,iCAAgB,KAAKC;AAFtB,iBAHH,EAMGX,KAAKY,QANR;AAOH,aATD,MASO;AACH;AACAV,wBAAQW,KAAR,CAAc,uCAAd;AACH;AACJ;;;qCAEYC,M,EAAQC,O,EAASC,M,EAAQC,G,EAAKL,Q,EAAU;AACjDV,oBAAQC,GAAR,CAAY,cAAZ,EAA4BW,MAA5B,EAAoCC,OAApC,EAA6CC,MAA7C,EAAqDC,GAArD,EAA0DL,QAA1D;AACA,gBAAIM,OAAOb,SAASc,aAAT,CAAuBJ,OAAvB,CAAX;;AAEA,gBAAIC,MAAJ,EAAa;AACT,qBAAK,IAAII,GAAT,IAAgBJ,MAAhB,EAAwB;AACpB,wBAAII,QAAQ,MAAZ,EAAqB;AACjB;AACA,4BAAIC,OAAOhB,SAASiB,cAAT,CAAwBN,OAAOI,GAAP,CAAxB,CAAX;AACAF,6BAAKK,WAAL,CAAiBF,IAAjB;AACH,qBAJD,MAIO,IAAIL,OAAOQ,cAAP,CAAsBJ,GAAtB,CAAJ,EAAgC;AACnCF,6BAAKO,YAAL,CAAkBL,GAAlB,EAAuBJ,OAAOI,GAAP,CAAvB;AACH;AACJ;AACJ;;AAED,gBAAIH,GAAJ,EAAU;AACNC,qBAAKQ,gBAAL,CAAsBT,IAAIR,SAA1B,EAAqC,UAACkB,KAAD,EAAW;AAC5CV,wBAAIP,WAAJ,CAAgBiB,KAAhB;AACH,iBAFD;AAGH;;AAED,gBAAIf,QAAJ,EAAe;AACX,qBAAM,IAAIgB,CAAV,IAAehB,QAAf,EAA0B;AACtB,yBAAKL,YAAL,CAAkBW,IAAlB,EAAwBN,SAASgB,CAAT,EAAYb,OAApC,EAA6CH,SAASgB,CAAT,EAAYZ,MAAzD,EAAiEJ,SAASgB,CAAT,EAAYD,KAA7E,EAAoFf,SAASgB,CAAT,EAAYhB,QAAhG;AACH;AACJ;;AAEDE,mBAAOS,WAAP,CAAmBL,IAAnB;AACH;;;+BAEMS,K,EAAO;AACVA,kBAAME,cAAN;AACA3B,oBAAQC,GAAR,CAAY,gBAAZ;AACH","file":"index.js","sourcesContent":["class helloSurvey {\n    /**\n     * Kick off the application\n     * @param  {obj} data [optional] Data to initialize the survey with.\n     * If data is not provided here, the init function may be called at any time\n     * with the required initialization data.\n     */\n    constructor(data) {\n        if( data ) {\n            // Initialize the survey\n            this.init(data);\n        }\n    }\n\n    init(data) {\n        console.log(\"i data\", data);\n\n        this.target;\n        if( data.target ) {\n            this.target = document.getElementById(data.target);\n        }\n\n        if( this.target ) {\n            // Build the form\n            this.addElementTo(this.target, 'form', {\n                method: 'post',\n                'accept-charset': 'utf-8'\n            }, {\n                eventType:      'submit',\n                eventAction:    this.submit\n            }, data.children);\n        } else {\n            // Report an error\n            console.error('Required target parameter is missing.');\n        }\n    }\n\n    addElementTo(parent, element, params, evt, children) {\n        console.log(\"addElementTo\", parent, element, params, evt, children);\n        let elem = document.createElement(element);\n\n        if( params ) {\n            for (let key in params) {\n                if( key === 'text' ) {\n                    // We need to make a text node as a child of the current element\n                    let text = document.createTextNode(params[key]);\n                    elem.appendChild(text);\n                } else if (params.hasOwnProperty(key)) {\n                    elem.setAttribute(key, params[key]);\n                }\n            }\n        }\n\n        if( evt ) {\n            elem.addEventListener(evt.eventType, (event) => {\n                evt.eventAction(event);\n            });\n        }\n\n        if( children ) {\n            for ( let c in children ) {\n                this.addElementTo(elem, children[c].element, children[c].params, children[c].event, children[c].children);\n            }\n        }\n\n        parent.appendChild(elem);\n    }\n\n    submit(event) {\n        event.preventDefault();\n        console.log('submit called!');\n    }\n}"]}