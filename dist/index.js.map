{"version":3,"sources":["../src/index.js"],"names":["helloSurvey","data","init","console","log","target","document","getElementById","addElementTo","method","eventType","eventAction","submit","fields","error","parent","element","params","evt","children","elem","createElement","key","hasOwnProperty","setAttribute","addEventListener","event","c","appendChild","preventDefault"],"mappings":";;;;;;IAAMA,W;AACF;;;;;;AAMA,yBAAYC,IAAZ,EAAkB;AAAA;;AACd,YAAIA,IAAJ,EAAW;AACP;AACA,iBAAKC,IAAL,CAAUD,IAAV;AACH;AACJ;;;;6BAEIA,I,EAAM;AACPE,oBAAQC,GAAR,CAAY,QAAZ,EAAsBH,IAAtB;;AAEA,iBAAKI,MAAL;AACA,gBAAIJ,KAAKI,MAAT,EAAkB;AACd,qBAAKA,MAAL,GAAcC,SAASC,cAAT,CAAwBN,KAAKI,MAA7B,CAAd;AACH;;AAED,gBAAI,KAAKA,MAAT,EAAkB;AACd;AACA,qBAAKG,YAAL,CAAkB,KAAKH,MAAvB,EAA+B,MAA/B,EAAuC;AACnCI,4BAAQ,MAD2B;AAEnC,sCAAkB;AAFiB,iBAAvC,EAGG;AACCC,+BAAgB,QADjB;AAECC,iCAAgB,KAAKC;AAFtB,iBAHH,EAMGX,KAAKY,MANR;AAOH,aATD,MASO;AACH;AACAV,wBAAQW,KAAR,CAAc,uCAAd;AACH;AACJ;;;qCAEYC,M,EAAQC,O,EAASC,M,EAAQC,G,EAAKC,Q,EAAU;AACjDhB,oBAAQC,GAAR,CAAY,cAAZ,EAA4BW,MAA5B,EAAoCC,OAApC,EAA6CC,MAA7C,EAAqDC,GAArD,EAA0DC,QAA1D;AACA,gBAAIC,OAAOd,SAASe,aAAT,CAAuBL,OAAvB,CAAX;;AAEA,gBAAIC,MAAJ,EAAa;AACT,qBAAK,IAAIK,GAAT,IAAgBL,MAAhB,EAAwB;AACpB,wBAAIA,OAAOM,cAAP,CAAsBD,GAAtB,CAAJ,EAAgC;AAC5BF,6BAAKI,YAAL,CAAkBF,GAAlB,EAAuBL,OAAOK,GAAP,CAAvB;AACH;AACJ;AACJ;;AAED,gBAAIJ,GAAJ,EAAU;AACNE,qBAAKK,gBAAL,CAAsBP,IAAIR,SAA1B,EAAqC,UAACgB,KAAD,EAAW;AAC5CR,wBAAIP,WAAJ,CAAgBe,KAAhB;AACH,iBAFD;AAGH;;AAED,gBAAIP,QAAJ,EAAe;AACX,qBAAM,IAAIQ,CAAV,IAAeR,QAAf,EAA0B;AACtB,yBAAKX,YAAL,CAAkBY,IAAlB,EAAwBD,SAASQ,CAAT,EAAYX,OAApC,EAA6CG,SAASQ,CAAT,EAAYV,MAAzD,EAAiEE,SAASQ,CAAT,EAAYD,KAA7E,EAAoFP,SAASQ,CAAT,EAAYd,MAAhG;AACH;AACJ;;AAEDE,mBAAOa,WAAP,CAAmBR,IAAnB;AACH;;;+BAEMM,K,EAAO;AACVA,kBAAMG,cAAN;AACA1B,oBAAQC,GAAR,CAAY,gBAAZ;AACH","file":"index.js","sourcesContent":["class helloSurvey {\n    /**\n     * Kick off the application\n     * @param  {obj} data [optional] Data to initialize the survey with.\n     * If data is not provided here, the init function may be called at any time\n     * with the required initialization data.\n     */\n    constructor(data) {\n        if( data ) {\n            // Initialize the survey\n            this.init(data);\n        }\n    }\n\n    init(data) {\n        console.log(\"i data\", data);\n\n        this.target;\n        if( data.target ) {\n            this.target = document.getElementById(data.target);\n        }\n\n        if( this.target ) {\n            // Build the form\n            this.addElementTo(this.target, 'form', {\n                method: 'post',\n                'accept-charset': 'utf-8'\n            }, {\n                eventType:      'submit',\n                eventAction:    this.submit\n            }, data.fields);\n        } else {\n            // Report an error\n            console.error('Required target parameter is missing.');\n        }\n    }\n\n    addElementTo(parent, element, params, evt, children) {\n        console.log(\"addElementTo\", parent, element, params, evt, children);\n        let elem = document.createElement(element);\n\n        if( params ) {\n            for (let key in params) {\n                if (params.hasOwnProperty(key)) {\n                    elem.setAttribute(key, params[key]);\n                }\n            }\n        }\n\n        if( evt ) {\n            elem.addEventListener(evt.eventType, (event) => {\n                evt.eventAction(event);\n            });\n        }\n\n        if( children ) {\n            for ( let c in children ) {\n                this.addElementTo(elem, children[c].element, children[c].params, children[c].event, children[c].fields);\n            }\n        }\n\n        parent.appendChild(elem);\n    }\n\n    submit(event) {\n        event.preventDefault();\n        console.log('submit called!');\n    }\n}"]}